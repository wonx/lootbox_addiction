 # Scraping lootbox DB from https://wiki.cs.money
 
 In the main lootbox dataset that is gathered from the JSON stream, there is information about the *time*, the *user*, the *lootbox case* (src) and the *lootbox outcome* (out). However, there is no information about the lootbox value. 
 
 By scraping an external database, in this case the website https://wiki.cs.money, a value can be assigned to each lootbox and its content. Moreover, since the site is bilingual in English and Chinese, the original JSON stream can be translated by using that information.
 
 The website is scraped using [BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/bs4/doc/) and stored as Pandas dataframes (see pickle files in the `df_pickles` subfolder). This process requires some supervision, since the website is sometimes irresponsive and some parts of the web require infinite scrolling to load all items, so the [Selenium WebDriver](https://www.selenium.dev/documentation/webdriver/) library is used in those cases. The script will automatically open a Chrome browser window and progressively scroll towards the end of the pages until all items have been loaded before BeautifulSoup can scrape them.
 
 Several dataframes in pickle format will be generated, but the important ones are `df_src.pkl` with the information about the lootbox cases (corresponding to the `src` column in the JSON stream), and `df_out.pkl` with the information about the lootbox outcomes (corresponding to the `out` column in the JSON stream). 
 
 At the time of writing this, `df_src` contained 163 unique values, while the `df_out` contained more than 4400.
 
 Here's a sample of both dataframes.
 
 `df_src`
 
|     | Type_en           | Link                                    | Type_zh   | Link_zh                                    | lootbox_en                              | lootbox_zh                     | Grade       | Rarity   | Value   | Skin_Link                                                                       |
|----:|:------------------|:----------------------------------------|:----------|:-------------------------------------------|:----------------------------------------|:-------------------------------|:------------|:---------|:--------|:--------------------------------------------------------------------------------|
| 155 | Graffiti Capsules | https://wiki.cs.money/graffiti-capsules | 涂鸦胶囊  | https://wiki.cs.money/zh/graffiti-capsules | CSGO Graffiti 3 Collection              | CS:GO 涂鸦 #3 收藏品           | ['Default'] | [1]      |         | https://wiki.cs.money/graffiti-capsules/csgo-graffiti-3-collection              |
|  65 | Collections       | https://wiki.cs.money/collections       | 藏品      | https://wiki.cs.money/zh/collections       | The Cache Collection                    | 死城之谜收藏品                 | ['Default'] | [1]      |         | https://wiki.cs.money/collections/the-cache-collection                          |
| 156 | Graffiti Capsules | https://wiki.cs.money/graffiti-capsules | 涂鸦胶囊  | https://wiki.cs.money/zh/graffiti-capsules | Stockholm 2021 Team Graffiti            | 斯德哥尔摩 2021 团队涂鸦       | ['Default'] | [1]      |         | https://wiki.cs.money/graffiti-capsules/stockholm-2021-team-graffiti-collection |
| 114 | Souvenir Packages | https://wiki.cs.money/souvenir-packages | 纪念品包  | https://wiki.cs.money/zh/souvenir-packages | Stockholm 2021 Ancient Souvenir Package | 斯德哥尔摩 2021 远古遗迹纪念包 | ['Default'] | [1]      | $ 3.65  | https://wiki.cs.money/cases/stockholm-2021-ancient-souvenir-package             |
|  56 | Collections       | https://wiki.cs.money/collections       | 藏品      | https://wiki.cs.money/zh/collections       | The Revolver Case Collection            | 左轮武器箱收藏品               | ['Default'] | [1]      |         | https://wiki.cs.money/collections/the-revolver-case-collection                  |
 
 `df_out`
 
 |      |   index | Type_en             | Type_zh   | Weapon_en                        | Weapon_zh                         | Image                                                                                       | Link                                       | Skin_Name    | Skin_Name_zh       | Grade                                                   | Rarity       | Value              | Value_Stattrak     | Value_Souvenir   | Skin_Link                                                               | Found_in                                                                                                                 | Found_in_zh                                                                                                     | Found_in_Link                                                                                                                                                                          | Found_in_Link_zh                                                                                                                                                                             | Link_zh                                      |
|-----:|--------:|:--------------------|:----------|:---------------------------------|:----------------------------------|:--------------------------------------------------------------------------------------------|:-------------------------------------------|:-------------|:-------------------|:--------------------------------------------------------|:-------------|:-------------------|:-------------------|:-----------------|:------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------|
| 1725 |     101 | Agents              | 探员      | Cmdr. Davida 'Goggles' Fernandez | 指挥官黛维达·费尔南德斯（护目镜） | nan                                                                                         | https://wiki.cs.money/agents               | SEAL Frogman | 海豹蛙人           | ['Master']                                              | [6]          | $ 29.29            |                    |                  | https://wiki.cs.money/agents/cmdr-davida-goggles-fernandez-seal-frogman | ['Operation Riptide Agents']                                                                                             | ['“激流大行动”探员']                                                                                            | ['https://wiki.cs.money/agent-collections/operation-riptide-agents']                                                                                                                   | ['https://wiki.cs.money/zh/agent-collections/operation-riptide-agents']                                                                                                                      | https://wiki.cs.money/zh/agents              |
| 3574 |    1950 | Tournament Stickers | 大赛贴纸  | FaZe                             | FaZe                              | nan                                                                                         | https://wiki.cs.money/tournament-stickers  | 2020 RMR     | 2020 RMR           | ['High Grade', 'Remarkable', 'Exotic', 'Extraordinary'] | [3, 4, 5, 6] | $ 0.03             |                    |                  | https://wiki.cs.money/stickers/sticker-faze-2020-rmr                    | ['2020 RMR Contenders']                                                                                                  | ['2020 RMR 竞争组战队胶囊']                                                                                     | ['https://wiki.cs.money/capsules/2020-rmr-contenders']                                                                                                                                 | ['https://wiki.cs.money/zh/capsules/2020-rmr-contenders']                                                                                                                                    | https://wiki.cs.money/zh/tournament-stickers |
| 1954 |     330 | Regular Stickers    | 普通贴纸  | God of Fortune                   | 财神到                            | nan                                                                                         | https://wiki.cs.money/regular-stickers     |              |                    | ['High Grade']                                          | [3]          | $ 0.96             |                    |                  | https://wiki.cs.money/stickers/sticker-god-of-fortune                   | ['Perfect World Sticker Capsule 2']                                                                                      | ['点亮中国 2 号印花胶囊']                                                                                       | ['https://wiki.cs.money/capsules/perfect-world-sticker-capsule-2']                                                                                                                     | ['https://wiki.cs.money/zh/capsules/perfect-world-sticker-capsule-2']                                                                                                                        | https://wiki.cs.money/zh/regular-stickers    |
|  467 |     467 | Knives              | 刀        | ★ Navaja Knife                   | 折刀（★）                         | https://wiki.cs.money/_next/static/images/navaja-knife-08542a837de56123443e28a62f25004a.png | https://wiki.cs.money/weapons/navaja-knife | Scorched     | 枯焦之色           | ['★ StatTrak™', 'Covert']                               | [4, 7]       | $ 69.32 - $ 149.17 | $ 70.48 - $ 101.07 |                  | https://wiki.cs.money/weapons/navaja-knife/scorched                     | ['Danger Zone Case', 'Horizon Case']                                                                                     | ['“头号特训”武器箱', '地平线武器箱']                                                                            | ['https://wiki.cs.money/cases/danger-zone-case', 'https://wiki.cs.money/cases/horizon-case']                                                                                           | ['https://wiki.cs.money/zh/cases/danger-zone-case', 'https://wiki.cs.money/zh/cases/horizon-case']                                                                                           | nan                                          |
| 2276 |     652 | Tournament Stickers | 大赛贴纸  | seang@res                        | seang@res                         | nan                                                                                         | https://wiki.cs.money/tournament-stickers  | Boston 2018  | 2018年波士顿锦标赛 | ['High Grade', 'Remarkable', 'Extraordinary']           | [3, 4, 6]    | $ 59.31            |                    |                  | https://wiki.cs.money/stickers/sticker-seang-res-boston-2018            | ['Boston 2018 Minor Challengers Autograph Capsule', 'Boston 2018 Minor Challengers with Flash Gaming Autograph Capsule'] | ['2018年波士顿锦标赛竞争组亲笔签名胶囊（含 TYLOO）', '2018年波士顿锦标赛竞争组亲笔签名胶囊（含 Flash Gaming）'] | ['https://wiki.cs.money/capsules/boston-2018-minor-challengers-autograph-capsule', 'https://wiki.cs.money/capsules/boston-2018-minor-challengers-with-flash-gaming-autograph-capsule'] | ['https://wiki.cs.money/zh/capsules/boston-2018-minor-challengers-autograph-capsule', 'https://wiki.cs.money/zh/capsules/boston-2018-minor-challengers-with-flash-gaming-autograph-capsule'] | https://wiki.cs.money/zh/tournament-stickers |
